---
title: Java - 一次从屎稿到成稿的发布
date: 2019-12-24
description: 从仓促应对的屎稿，到优化的成稿，源于经验不足。
---

# 背景

用户的需求至上，因为插件版本不同，我们得支持，虽然只需要改屈指可数的几个文件而已，（其他都是公用），由于我经验不足，加上客观理由（急用），也因为最近刚学了分支开分流...,

## 屎稿

于是，用我有限的脑子和经验，立马决定新开分支，晚上加班搞定；

## 中间稿 1

然而，第二天又有新需求改动，改的是公用文件，忙死我了，合并分支~

稍微空了，想想也觉得自己太笨了，干嘛新开分支，做成个新的模块嵌进主分支项目就好了不是？

## 中间稿 2
于是，加模块，删分支，轻松多了；

又然而，还是有新需求，改公用文件，一不小心就改了另一个模块，然后怎么也跑不通，发现改错模块了，又是好多坑；

## 未成稿
继续想，我可以把两个模块的公用部分抽离出来，做成新的公用模块啊，这不就舒服多了？

这么想着，还没开动，正好和同事沟通其他事，他经验丰富，顺便请教他，我的这个问题和现在的思路。

他建议，可以考虑试试 [Maven Profile](https://maven.apache.org/guides/introduction/introduction-to-profiles.html) 呢，正是为不同环境 build 设计的。

恍悟，原来这种现实问题，早已经有现成的工具，我咋就没想到呢？

## 成稿

于是学习 `maven profile`, 终于`专业`的解决这个问题，虽然在实施的时候还是遇到蛮多问题（新手没办法~），不过这次收获也不少。

从 新开分支 -> 新加模块 -> 抽取公用模块 -> 利用现有 `mvn profile`，这一番折腾，也许当初设计 profile 的人也有经历过类似，说不准呢？

## 参考

- [Maven – Introduction to build profiles](https://maven.apache.org/guides/introduction/introduction-to-profiles.html)

## ChangeLog
- 2019-12-24 update
- 2019-12-24 init