<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.1.22" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>java/Abstract: My Struggle — Life goes on...</title>
</head>
<body class="tc-body">

<section class="tc-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists " data-tags="" data-tiddler-title="java/Abstract"><div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><span class=" tc-reveal"><button aria-label="more" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="More actions"></button><div class=" tc-reveal" hidden="true"></div></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="edit" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Edit this tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="close" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Close this tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span></span><span><span class="tc-tiddler-title-icon" style="fill:;"></span><h2 class="tc-title">java/Abstract</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class=" tc-reveal" hidden="true"></div>
<div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a>26th July 2020</div></div><div class=" tc-reveal">
<div class="tc-tags-wrapper"></div>
</div>

<div class="tc-tiddler-body tc-reveal"><hr><p>title: 抽象，抽象，抽象<br>date: 2019-12-28<br>edit: 2019-12-28<br>layout: post<br>status: Completed<br>categories:</p><ul><li><p>心路<br>tags:</p></li><li><p>心路<br>description:  遭遇性能问题，经同事一点拨，发现问题不仅在于我不会调优（其实是缺乏常识），更是欠缺抽象能力。</p></li></ul><hr><h1>背景</h1><p>一个简单的功能，读取一个文件，内包含一堆文件列表，运行时我们要读取一个目录，挨个检查里面的文件是否再这个文件列表中，如不在则抛弃，否则继续；</p><p>然后发现，文件中的列表越长，运行的速度慢的很；</p><h1>分析</h1><p>我最初的设计是，（以下用伪代码, 实际需求逻辑要复杂些，这里简化了）</p><p>在 main.java 中，</p><pre><code>loop dirUnderTest:
  if (Utils.isIgnored(filename)){
    // do sth
  }
</code></pre><p>在 Utils.java 中：</p><pre><code>public boolean isIgnored(fileName){
  if (fileList exists){
    files = readFromFileList()
    check if fileToCheck is in files
  }
}
</code></pre><p>相信有经验的朋友已经看出问题了。</p><p>但是欠缺经验的我，并没有看出这里的问题。</p><p>但意识中知道这个 isIgnored 检查放在 Utils 里面在程序运行的时候多次调用，不妥。</p><p>应该最好是一次性在别处（loop dirUnderTest)之前就做好，甚至，将 dirUnderTest 中的文件列表内容直接替换为 fileList 中的文件列表。</p><p>于是我朝着这个思路行进，结果被阻，限于第三方 plugin 的局限性，没法控制。</p><p>同事看了我的逻辑，一眼便找出问题所在，好丢人，我竟然在 isIngored 方法中读取文件，以至于每次调用这个方法，都要读一遍文件...</p><p>还没完，同事又建议我，抽象出一个 File 对象，将文件名、ignored 等属性都放进去，这样也方便将来提取信息；</p><p>恍悟。</p><h1>收获</h1><p>其实已经见过很多这种应用，比如 Json/xml/db 与 java 实体类 之间的转换，只是，以前是见别人用，然后在自己的程序中遇到 xml 序列化时也这么用了，但都还只限于模仿，并没有“举一反三“的应用，比如像这次同事的建议。所以印象深刻了。</p><p>也醒悟，我离专业程序员的道路还好远好远啊啊啊。</p><h1><a class="tc-tiddlylink tc-tiddlylink-missing" href="ChangeLog.html">ChangeLog</a></h1><ul><li><p>2019-12-28 init</p></li></ul></div>



</div>

</p>
</section>
</body>
</html>
