---
title: Python ç»Ÿè®¡åŸºç¡€
date: 2020-01-02
edit: 2020-01-02
layout: post
status: Writing
categories:
  - Python
tags:
  - Python
description:  å‡ ä¸ªç»Ÿè®¡ç›¸å…³çš„ python æ¨¡å—å·¥å…·ï¼Œä»¥åŠå¯è§†åŒ–ã€‚
---

# èƒŒæ™¯

åœ¨ [Issue 399 ~è å‘¨åˆŠ ~æ±‡é›†å…¨çƒè äº‹å„¿ ;-)](http://weekly.pychina.org/issue/issue-399.html)ä¸Šçœ‹åˆ° [Python Statistics Fundamentals: How to Describe Your Data â€“ Real Python](https://realpython.com/python-statistics/)ï¼ŒæŒºæ„Ÿå…´è¶£ï¼Œä»¥åæˆ–è®¸ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥è·Ÿç€å­¦äº†ä¸€ä¸‹ã€‚

æ–‡ç« ä»‹ç»çš„å¾ˆè¯¦ç»†ï¼Œæœ‰å…·ä½“çš„ä»£ç ï¼Œæ²¡æœ‰å®Œå…¨è·Ÿç€åšä¸‹æ¥ï¼Œéƒ¨åˆ†ä»£ç è§[exercise/python/statistics](https://github.com/bemself/exercise/tree/master/python/statistics)ã€‚

æœ¬æ–‡ä¸»è¦æ‹ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œåº”ç”¨åœºæ™¯ï¼Œæ¯”è¾ƒç­‰ã€‚

# å°ç»“

## ä»‹ç»äº†æè¿°æ€§ç»Ÿè®¡çš„å‡ ç§æ–¹æ³•ï¼š

### åŒä¸€æ•°æ®é›†å†…ï¼š

- central tendencyï¼šå°±æ˜¯é€šå¸¸æˆ‘ä»¬è¯´çš„å¹³å‡ï¼Œæè¿°æ•°æ®çš„å±…ä¸­è¶‹åŠ¿
- variabilityï¼šæè¿°æ•°æ®çš„åˆ†å¸ƒæƒ…å†µ
  - Varianceï¼š æ–¹å·®
  - Standard deviationï¼šæ ‡å‡†å·® = æ–¹å·®çš„å¹³æ–¹æ ¹
    - æ•°æ®ç¦»ä¸­å¿ƒï¼ˆå¹³å‡æ•°ï¼‰æœ‰å¤šè¿œï¼ˆæ±‚å¹³å‡ï¼‰
  - Skewnessï¼šåæ–œåº¦
    - æ•°æ®æ•´ä½“åç§»æƒ…å†µ
  - Percentilesï¼šç™¾åˆ†ä½æ•°
    - è®¡ç®—æœ‰ p% çš„æ•°å°‘äºç­‰äºæŸä¸ªå€¼
  - Rangesï¼šèŒƒå›´
    - è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œå³ æœ€å¤§å€¼ ä¸ æœ€å°å€¼çš„å·®
- visuability: å¯è§†åŒ–ä¸Šé¢è¿™äº›é‡åŒ–åçš„æ•°æ®

### ä¸åŒæ•°æ®é›†é—´ï¼šç›¸å…³æ€§

- æ­£ç›¸å…³
- è´Ÿç›¸å…³
- å¼±ç›¸å…³

ä¸¤ä¸ªä¸»è¦ç»Ÿè®¡é‡ï¼š

- covarianceï¼šåæ–¹å·®
- correlation coefficientï¼šç›¸å…³ç³»æ•°

è¿™ä¸¤ä¸ªç›®å‰æˆ‘ç†è§£èµ·æ¥è¿˜æœ‰ç‚¹å›°éš¾ï¼Œå¾…ä»¥åè¡¥

æ‰¾åˆ°ä¸€ç¯‡æ®è¯´æ˜¯å¾ˆä¸é”™çš„è§£é‡Šåæ–¹å·®çš„æ–‡ç« ï¼š[å…³äºåæ–¹å·®çŸ©é˜µçš„æ¦‚å¿µåŠæ„ä¹‰](http://blog.sina.com.cn/s/blog_672c5a470100miqq.html), å¾…çœ‹ã€‚

## ä»‹ç»äº† 4 ä¸ª ç»Ÿè®¡ç›¸å…³çš„ python æ¨¡å—/åŒ…ï¼š

- python åŸç”Ÿï¼šè‡ªå·±å†™ä»£ç ï¼Œå¥—æ•°å­¦å…¬å¼
- python è‡ªå¸¦ï¼š[statistics](https://docs.python.org/3/library/statistics.html)
  - [official documentation](https://docs.python.org/3/library/statistics.html)
- [NumPy](https://docs.scipy.org/doc/numpy/user/index.html)ï¼š
  - åŸºæœ¬æ•°æ®ç±»å‹ï¼š[ndarray](https://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html)
  - å¸¸ç”¨æ–¹æ³•ï¼š[Statistics â€” NumPy v1.17 Manual](https://docs.scipy.org/doc/numpy/reference/routines.statistics.html)
  - [User Guide](https://docs.scipy.org/doc/numpy/user/index.html)
- [SciPy](https://www.scipy.org/getting-started.html)ï¼šåŸºäº Numpy å¹¶æ‰©å±•
- [Pandas](https://pandas.pydata.org/pandas-docs/stable/)ï¼šåŸºäº Numpy å¹¶æ‰©å±•
  - ä¸€ç»´æ•°æ®å¯¹è±¡ï¼š[Series](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html)
  - äºŒç»´æ•°æ®å¯¹è±¡ï¼š[DataFrame](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html)
  - [official Getting Started page](https://pandas.pydata.org/pandas-docs/stable/getting_started/index.html)
  
**è¿™ä¹ˆå¤šåŒ…æ€ä¹ˆé€‰ï¼š**
  - å°æ•°æ®é›†ã€æˆ–ä¸æƒ³ä¸èƒ½ä¾èµ–å…¶ä»–åŒ…ï¼šè‡ªå¸¦ statistics
  - æ•°æ®é›†å¸¦æ ‡ç­¾(labelledï¼Œå³æœ‰ headers)ï¼Œé€‰ pandasï¼Œå¦åˆ™ scipy æˆ– numpy
  - scipy æ¯” numpy çš„åŠŸèƒ½æ›´å¤šä¸€äº›ï¼Œæ¯”å¦‚ describe()æ–¹æ³•ç­‰
  -  æ•°æ®é›†ä¸­å¤šåŒ…å« nan æ•°æ®ï¼Œé‚£é€‰ pandasï¼Œå®ƒå¯¹åŒ…å« NaN æ•°æ®çš„å¤„ç†æ›´å‹å¥½ï¼Œä¸ä¼šè¿”å› NaN

## ä»‹ç»äº† 1 ä¸ªå¯è§†åŒ–å·¥å…·ï¼š

- [Matplotlib](https://matplotlib.org/)ï¼šè·Ÿä¸Šé¢çš„å‡ ä¸ªéƒ½åˆå¾—æ¥
  - [official Userâ€™s Guide](https://matplotlib.org/users/index.html)

## æ ·æœ¬å’Œæ€»ä½“

åœ¨è®¡ç®—æ–¹å·®ç­‰æ–¹æ³•æ—¶ï¼Œå¾—æ³¨æ„åŒºåˆ†æ˜¯æ ·æœ¬è¿˜æ˜¯æ€»ä½“ï¼Œå› ä¸ºæœ‰ä¸ªé—®é¢˜ [ä¸ºä»€ä¹ˆæ ·æœ¬æ–¹å·®ï¼ˆsample varianceï¼‰çš„åˆ†æ¯æ˜¯ n-1ï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/20099757)

python çš„å‡ ä¸ªåŒ…ä¸­éƒ½æœ‰è¿™æ–¹é¢çš„å¤„ç†ï¼š

æ¯”å¦‚ï¼š

- statistics: 
  - [æ€»ä½“æ–¹å·® statistics.pvariance()](https://docs.python.org/3/library/statistics.html#statistics.pvariance)
  - æ ·æœ¬æ–¹å·®ï¼šstatistics.variance()
- NumPy or Pandasï¼š
  - æ€»ä½“æ–¹å·®ï¼šparameter ddof=0

## æ•°æ®é›†ä¸­åŒ…å« [not-a-number value (nan)](https://en.wikipedia.org/wiki/NaN)

æˆ‘ä»æ–‡ç« ä¸€è·¯çœ‹ä¸‹æ¥ï¼Œæ„Ÿè§‰ scipy å’Œ pandas å¯¹ nan çš„å®¹å¿åº¦æ¯”è¾ƒé«˜ï¼Œé€šå¸¸ä¼šå¿½ç•¥è¿™äº›å€¼ï¼Œè¿”å›éœ€è¦çš„ç»“æœï¼Œè€Œå…¶ä»–åŒ…åˆ™ç»å¸¸è¿”å› nanã€‚

## æ‰“åŒ…è·å–æ‰€æœ‰çš„ç»Ÿè®¡é‡

scipy å’Œ pandas æä¾›äº†è¿™ç§ describe æ–¹æ³•ï¼š
- [scipy.stats.describe()](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.describe.html)
- [pandas series .describe()](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.describe.html)

ä¸€æ¬¡æ€§è¿”å›åŒ…å«æ‰€æœ‰ç»Ÿè®¡é‡çš„ç»“æœé›†ï¼Œå¾ˆæ˜¯æ–¹ä¾¿ï¼Œä¸ç”¨ä¸€ä¸ªä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•è°ƒç”¨äº†ã€‚

Numpy æ˜¯å¦ä¹Ÿæœ‰ç±»ä¼¼çš„ï¼Œä½œè€…æ²¡æœ‰æåˆ°ï¼Œå¾…æŸ¥ã€‚

# æ„Ÿæ‚Ÿ

å¼€å§‹çœ‹çš„æ—¶å€™å…´è‡´å‹ƒå‹ƒå‡†å¤‡è·Ÿç€ä¸€èµ·å½•ä¸€éä»£ç ï¼Œåæ¥å‘ç°ï¼Œæ•°å­¦åŸºç¡€ä¸è¡Œï¼Œå¾ˆå¤šåŸºæœ¬æ¦‚å¿µä¸æ¸…ï¼Œå…‰çŸ¥é“è°ƒç”¨ä»€ä¹ˆå‡½æ•°æ–¹æ³•æ²¡å•¥å¸®åŠ©ï¼Œæ‰€ä»¥è¿˜æ˜¯è¾¹çœ‹è¾¹æ‹äº†ä¸€éåŸºæœ¬æ¦‚å¿µã€‚

# åŸºæœ¬æ¦‚å¿µå­¦ä¹ 

## å•ä¸€æ•°æ®é›†ï¼š

ç®—æœ¯å¹³å‡æ•°ï¼šæœ€ç®€å•æ˜“æ‡‚ï¼Œä½†å®¹æ˜“å— outliers å½±å“
ä¸­ä½æ•°ï¼šå¯ä»¥æ¶ˆé™¤ outliers å½±å“

### å¹³å‡æ•°

  é€šå¸¸å¤šæœ‰ç®€å•å’ŒåŠ æƒ

**- ç®—æœ¯å¹³å‡æ•°ï¼š** è¿™ä¸ªéƒ½ç†Ÿæ‚‰çš„ï¼Œæ•°æ®é›†ä¸­çš„æ‰€æœ‰æ•°ä¹‹å’Œ/æ€»æ•°

- **åŠ æƒå¹³å‡æ•°ï¼š** Î£áµ¢(ğ‘¤áµ¢ğ‘¥áµ¢) / Î£áµ¢ğ‘¤áµ¢.

  äº†è§£è¿™ä¸ªæ¦‚å¿µçš„æ—¶å€™ï¼Œè®©æˆ‘ç»ˆäºç†è§£äº† [Using the Python zip() Function](https://realpython.com/python-zip-function/) ã€‚zip å°±æ˜¯æ‹‰é“¾ï¼ŒæŠŠ ğ‘¤áµ¢ å’Œ ğ‘¥áµ¢ äº¤ç»‡åœ¨ä¸€èµ·ï¼Œæœ‰æ„æ€ã€‚

**- å‡ ä½•å¹³å‡æ•°**ï¼šâ¿âˆš(Î áµ¢ğ‘¥áµ¢)

  - **åº”ç”¨åœºæ™¯ï¼š**æ„Ÿè°¢[å‡ ä½•å¹³å‡æ•°çš„ç©ºé—´æ„ä¹‰æ˜¯ä»€ä¹ˆå•Šï¼Ÿ - æˆé•¿çš„å›ç­” - çŸ¥ä¹](
https://www.zhihu.com/question/36176004/answer/139623544) -> [Math is Func](https://www.mathsisfun.com/numbers/geometric-mean.html)
    - æ¯”è¾ƒå‡ ç§ç‰©è´¨æˆ–äº‹æƒ…ï¼Œä»–ä»¬çš„ä¸€äº›ç‰¹å¾å±æ€§ä¹‹é—´å·®åˆ«æ¯”è¾ƒå¤§
    - æ¯”å¦‚ï¼šæ¯”è¾ƒç…§ç›¸æœºçš„æ€§èƒ½ï¼Œæ”¾å¤§å€æ•° 200 å’Œè§†é‡ 8ï¼Œå‰è€…æ˜¯åè€…çš„å‡ å€æ•°
      - å¦‚æœç”¨ç®—æ•°å¹³å‡æ•°ï¼Œoutliers å½±å“æ¯”è¾ƒå¤§
    - å‡ ä½•å¹³å‡æ•°ä¼šæ¶ˆé™¤è¿™äº›çœ‹ä¼¼ Outliers çš„å½±å“

**- å€’æ•°å¹³å‡æ•°ï¼ˆHarmonic mean)ï¼š** 
  - æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ•°å…ˆå–å€’æ•°
  - ç„¶åæ±‚å’Œ
  - ç„¶åæ±‚ç®—æœ¯å¹³å‡æ•°
  - ç„¶åå†æ±‚å€’æ•°

  **å…¬å¼**ï¼š ğ‘› / Î£áµ¢(1/ğ‘¥áµ¢)

  **ä¸€ä¸ªç»å…¸çš„åº”ç”¨ï¼š**åœ¨è·ç¦»ç›¸ç­‰çš„æƒ…å†µä¸‹ï¼Œæ±‚å¹³å‡é€Ÿåº¦ã€‚æ¯”å¦‚ä½ ä»å®¶åˆ°å…¬å¸ï¼Œå†ä»å…¬å¸åˆ°å®¶ã€‚ä½†å¦‚æœä½ èµ°äº†ä¸åŒçš„è·¯çº¿ï¼Œå°±å¾—è€ƒè™‘åŠ æƒè°ƒå’Œäº†ã€‚

  **å…¶ä»–åº”ç”¨ï¼š**
  - æœºå™¨å­¦ä¹ é‡Œé¢ï¼ŒF1
  - æ±‚åˆ©ç‡ï¼Œè´¹ç‡

  **åŸç†ï¼š**

  - è·ç¦»ç›¸ç­‰çš„æƒ…å†µä¸‹ï¼Œé€Ÿåº¦ä¸åŒï¼Œç”¨æ—¶ä¾¿ä¸åŒï¼›
  - å› æ­¤ï¼Œå¹³å‡é€Ÿåº¦ä¼šåå‘ç”¨æ—¶æ¯”è¾ƒå°‘çš„é‚£ä¸ªé€Ÿåº¦
  - æ‰€ä»¥ï¼Œç®—æœ¯å¹³å‡æ•°åœ¨è¿™é‡Œä¸å¤Ÿå‡†ç¡®
    - å®ƒæ˜¯ä»¥é€Ÿåº¦ï¼ˆå…¬é‡Œ/å°æ—¶ï¼‰ä¸ºåŸºæ•°ï¼Œæœªè€ƒè™‘ç”¨æ—¶çš„åç§»
    - ç”¨æ—¶é—´ä½œä¸ºæƒé‡ï¼Œå³åŠ æƒå¹³å‡æ•°å¯ä»¥å¾—åˆ°å‡†ç¡®çš„å¹³å‡é€Ÿåº¦
  - å€’æ•°å¹³å‡æ•°åˆ™æ˜¯åè¿‡æ¥
    - ä»¥ç”¨æ—¶ï¼ˆå°æ—¶/å…¬é‡Œï¼‰æ¥è®¡ç®—ï¼Œ

  **å¯å‘ï¼š**
  - åè¿‡æ¥æƒ³ï¼Œåè¿‡æ¥æƒ³

### ä¸­ä½æ•°

ä½äºæ•°æ®é›†ä¸­é—´çš„æ•°ï¼Œ

- å¥‡æ•°ä¸ªï¼š0.5*(n+1)
- å¶æ•°ä¸ªï¼š0.5*n, 0.5*n+1

å®ƒå’Œå¹³å‡æ•°çš„ä¸»è¦åŒºåˆ«åœ¨äº outliersï¼Œå°±æ˜¯ä¸€äº›ç‰¹åˆ«å¤§çš„æˆ–è€…ç‰¹åˆ«å°çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®å¯¹ä¸­ä½æ•°çš„è®¡ç®—å½±å“ä¸å¤§ï¼Œè€Œå¹³å‡æ•°åˆ™å¾ˆå—å½±å“ã€‚

ç°å®ä¸­å¯è®°å¾—ï¼Œå¾ˆå¤šå¤§èµ›ï¼Œåœ¨è®¡åˆ†çš„æ—¶å€™ï¼Œéƒ½ä¼šâ€œå»æ‰ä¸€ä¸ªæœ€é«˜åˆ†ï¼Œå†å»æ‰ä¸€ä¸ªæœ€ä½åˆ†ï¼Œé€‰æ‰‹çš„æœ€ç»ˆå¾—åˆ†æ˜¯ XXXâ€ã€‚è¿™ä¸ªæœ€é«˜åˆ†å’Œæœ€ä½åˆ†å°±æ˜¯ Outliersã€‚

### Mode

å‡ºç°æœ€å¤šçš„æ•°ã€‚è¿™ä¸ªæ¯”è¾ƒç®€å•ã€‚

## æ–¹å·®ï¼Œæ ‡å‡†å·®ï¼Œåæ–¹å·®

// TODO

# å¯è§†åŒ–

## æ•°æ®æº

2D æ•°æ®ï¼Œå¸¦æ ‡ç­¾æˆ–ä¸å¸¦æ ‡ç­¾ ï¼ˆå¤´ï¼‰

Numpy-: `np.array([...])

Pandasï¼š`pd.DataFrame(a, index=row_names, columns=col_names)`

å¯ä»¥ç”¨ [np.random](https://docs.scipy.org/doc/numpy-1.16.0/reference/routines.random.html) ç”Ÿæˆä¸€äº›æ ·æœ¬æ•°æ®ï¼Œå¿«é€Ÿè¯•éªŒã€‚

## å‘ˆç°æ ·å¼å›¾

  - Box plots
  - Histograms
  - Pie charts
  - Bar charts
  - X-Y plots
  - Heatmaps

å…·ä½“è§†éœ€æ±‚è€Œå®šï¼Œæ¯ç§å›¾éƒ½æœ‰ä¸åŒçš„æ•°æ®è¾“å…¥è¦æ±‚ã€‚

## å·¥å…·

```
>>> import matplotlib.pyplot as plt
>>> plt.style.use('ggplot')
```

åŸºæœ¬å°±æ˜¯ç±»ä¼¼ä»¥ä¸‹ä¸‰æ­¥ï¼šå†åŠ ä¸Šä¸€äº›åæ ‡è½´ã€æ ·ä¾‹ç­‰

```
fig, ax = plt.subplots()
ax.boxplot((x, y, z), vert=False, showmeans=True, meanline=True,
           labels=('x', 'y', 'z'), patch_artist=True,
           medianprops={'linewidth': 2, 'color': 'purple'},
           meanprops={'linewidth': 2, 'color': 'red'})
plt.show()

```

## æ‰©å±•

å…³äºå¯è§†åŒ–ï¼Œè¿˜æœ‰å…¶ä»–å·¥å…·ï¼š

- [Interactive Data Visualization in Python With Bokeh](https://realpython.com/python-data-visualization-bokeh/)
- [Dash](https://plot.ly/)
- ...

# å‚è€ƒ

- [harmonic mean](https://en.wikipedia.org/wiki/Harmonic_mean)
- [å¦‚ä½•ç†è§£ä¸åº”ç”¨è°ƒå’Œå¹³å‡æ•°ï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/23096098/answer/863684743)
- [éå¸¸æœ‰æ„æ€ geometric mean](https://www.mathsisfun.com/numbers/geometric-mean.html)
- [å…³äºåæ–¹å·®çŸ©é˜µçš„æ¦‚å¿µåŠæ„ä¹‰](http://blog.sina.com.cn/s/blog_672c5a470100miqq.html)
  
## ChangeLog
- 2020-01-02 init