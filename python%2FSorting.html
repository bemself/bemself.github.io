<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.1.22" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>python/Sorting: My Struggle — Life goes on...</title>
</head>
<body class="tc-body">

<section class="tc-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists " data-tags="" data-tiddler-title="python/Sorting"><div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><span class=" tc-reveal"><button aria-label="more" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="More actions"></button><div class=" tc-reveal" hidden="true"></div></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="edit" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Edit this tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="close" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Close this tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span></span><span><span class="tc-tiddler-title-icon" style="fill:;"></span><h2 class="tc-title">python/Sorting</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class=" tc-reveal" hidden="true"></div>
<div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a>26th July 2020</div></div><div class=" tc-reveal">
<div class="tc-tags-wrapper"></div>
</div>

<div class="tc-tiddler-body tc-reveal"><hr><p>title: Python - Sort 各种可能<br>date: 2019-12-25<br>edit: 2019-12-25<br>layout: post<br>status: Writing<br>categories:</p><ul><li><p>Python<br>tags:</p></li><li><p>Python<br>description:  Python 各种数据类型，都怎么排序的？</p></li></ul><hr><h1>背景</h1><h2>Summary</h2><ul><li><p><a href="https://docs.python.org/3/library/functions.html#sorted" target="_blank">sorted(a datatype)</a></p><ul><li><p>返回一个排序好的 dtype 同类型</p></li><li><p>iterable 的数据类型都适用</p></li></ul></li><li><p><a href="https://docs.python.org/3/library/stdtypes.html#list.sort" target="_blank">list.sort()</a></p><ul><li><p><strong>不返回</strong> 一个新的 list</p><ul><li><p>即，原地 sort 列表本身</p></li></ul></li><li><p>只有 list 有这个方法</p></li></ul></li></ul><h2>List.sort()</h2><ul><li><p><a href="https://docs.python.org/3/faq/design.html#why-doesn-t-list-sort-return-the-sorted-list" target="_blank">Why doesn't list.sort() return the sorted list?</a></p></li></ul><p>原因就是：返回一个新的 list 成本大，浪费</p><h2>sorted()</h2><p>sorted 有两个重要参数：</p><ul><li><p>reverse: 这个很好理解，不提了。</p></li><li><p>key: 重点说这个，因为我绕进去过。</p></li></ul><h3>key 参数</h3><p>本意就是：我要按照这个 key 来排序，这个 key 由你定义，比如：</p><ul><li><p>如果有一组数，你可能想从小到大排</p></li><li><p>如果是一组字符串，你可能想按字母顺序排</p></li><li><p>如果是一组对象，比如一群学生，你可能想按年龄排，或者身高排，等等 你说了算</p></li></ul><p>对应到程序里，这个 key 怎么来表达？先记着：这个 key 的值是个 <code>function</code>。</p><p><strong>先看简单的情况: 不传 key 值</strong>：，就是默认按 <code>&lt;</code> 来排需，即从小到大，从 a 到 z 排序。</p><p>以 <code>alist = [1, 3, 2]</code> 为例，</p><pre><code>&gt;&gt;&gt; alist = [1,3,2]
&gt;&gt;&gt; sorted(alist)
[1, 2, 3]
</code></pre><p><strong>现在看传入 key 值（function）- 简单的函数</strong>:</p><pre><code>&gt;&gt;&gt; alist = &quot;This is a test&quot;.split()
&gt;&gt;&gt; sorted(alist, key=str.lower)
['a', 'is', 'test', 'This']
</code></pre><p>上面这个例子中， key的值是 str.lower 函数。</p><pre><code>&gt;&gt;&gt; str.lower
&lt;method 'lower' of 'str' objects
&gt;&gt;&gt;&gt; str.lower('This')
'this'
</code></pre><p>当在 sorted 里面用于排序的时候，这个 key 是怎么用的？</p><pre><code>alist = [&quot;this&quot;, &quot;is&quot;, &quot;a&quot;, &quot;test&quot;]
key = str.lower
</code></pre><p>大致是这样的顺序：</p><ul><li><p>新建一个list, 如称之为 sorted_list</p></li><li><p>对于 alist 里面的每一个元素，分别将其作为参数传入 str.lower() 函数中，</p></li><li><p>得到的新值添加到 sorted_list 中</p></li><li><p>返回这个 sorted_list</p></li></ul><p><strong>继续看传入 key 值（function）- Tuple</strong>:</p><p><strong>继续看传入 key 值（function）- 复杂列表</strong>:</p><p><strong>继续看传入 key 值（function）- 字典</strong>:</p><p><strong>继续看传入 key 值（function）- 嵌套字典</strong>:</p><h2>Issues</h2><p>终于能看懂点这种报错了：</p><blockquote><p><a class="tc-tiddlylink tc-tiddlylink-missing" href="TypeError.html">TypeError</a>: '&lt;' not supported between instances of 'dict' and 'dict'</p></blockquote><p>因为设计中明确写了：</p><blockquote><p>sort(*, key=None, reverse=False)</p></blockquote><pre>This method sorts the list in place, using only &lt; comparisons between items.
</pre><h2>要注意的点</h2><ul><li><p>list.sort()：</p><ul><li><p>如果中间比较的时候出错，很可能这个列表已经是半排序过了~</p></li><li><p>如果排序过程中，列表又有改动（比如别人插入了新记录），也可能导致列表乱掉~</p></li></ul></li></ul><h2><a class="tc-tiddlylink tc-tiddlylink-missing" href="ChangeLog.html">ChangeLog</a></h2><ul><li><p>2019-12-25 init</p></li></ul></div>



</div>

</p>
</section>
</body>
</html>
