# Pull Request
## Best Practices

- break into smaller parts

## Prepare for Pull Request

make sure you work on a clean separate branch

```
git checkout -b new-branch upstream/master
<make your changes>
git ci -m "mutation observer: new trans"
git pu origin new-branch
```

## create pull request

# remove commit history

## git reset

- permanently remove git history
git reset --hard 559768c4ae7c6cab72340ff05c0d84443d906bd3
git pu -f origin <branch_name>

- keep git history and create new commit log
git revert

# Remove branch

## Remove Local Branch
git checkout --orphan <branch_name>
git br -d <branch_name>
git br -D <branch_name> (force delete)

但是，remotes/origin/<branch_name> 仍然存在

```
git br -a
  01-mutation-observer
* master
  remotes/origin/01-mutation-observer
  remotes/origin/arraybuffer
  remotes/origin/master
```
搞清楚这些 branch 都存在哪里？ 
```
.git
	|
	refs
	    ├── heads
	    │   ├── 01-mutation-observer
	    │   └── master
	    ├── remotes
	    │   ├── origin
	    │   │   ├── 01-mutation-observer
	    │   │   ├── arraybuffer
	    │   │   ├── master
	    │   │   ├── sync-0e4f5e42
	    │   │   └── sync-71ff8f81
```
只要在这里把相应的目录删掉即可

```
rm -rf .git/refs/remotes/origin/arraybuffer
```

## Remove remote branch

git push <remote_name> --delete <branch_name>

# Git log
To get the last n commit hashes it may be useful to use: git log --pretty=oneline --abbrev-commit | head -n
## check log for particular file 

git log --oneline 4-binary/01-arraybuffer-binary-arrays/article.md
git log --date=format:"%Y-%m-%d %H:%M:%S" --pretty="cSHA:%h %nauthor:%cN <%cE> %ndate:%cd %ncNotes:%B" 4-binary/01-arraybuffer-binary-arrays/article.md

## get file commit history from Github api

本来想 git clone 下来本地 git log 查看，结果速度奇慢，只好先找 api 帮忙。

https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits?path=4-binary/01-arraybuffer-binary-arrays/article.md

https://github.com/javascript-tutorial/en.javascript.info/commit/3ba28aa104dac75caf8d128f3913dd9f3fb52bf4

# Git Merge

## quickly accept ours changes
git checkout --ours 2-ui/99-ui-misc/01-mutation-observer/article.md
## issue: you need to resolve current index 

https://appuals.com/how-to-fix-git-error-you-need-to-resolve-your-current-index-first/

revert a merge:
git reset -–merge
git revert HEAD


# Git Diff
- [git - How to see the changes between two commits without commits in-between? - Stack Overflow](https://stackoverflow.com/questions/1191282/how-to-see-the-changes-between-two-commits-without-commits-in-between)

git diff e6ed86c7 54984506   4-binary/01-arraybuffer-binary-arrays/article.md > diff.patch

older commit is before the new commit

# Reference

- https://stackoverflow.com/questions/2003505/how-do-i-delete-a-git-branch-locally-and-remotely

- https://stackoverflow.com/questions/14034718/include-only-specific-commits-in-a-pull-request

- https://stackoverflow.com/questions/34027850/how-to-pull-request-a-specific-commit

- https://stackoverflow.com/questions/1628563/move-the-most-recent-commits-to-a-new-branch-with-git

- https://stackoverflow.com/questions/4470523/create-a-branch-in-git-from-another-branch

# Changelog
- 2019-11-30 init
